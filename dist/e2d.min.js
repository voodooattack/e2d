!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.e2d=e()}}(function(){return function e(t,n,r){function i(a,o){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!o&&l)return l(a,!0);if(s)return s(a,!0);var c=Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){var n=t[a][1][e];return i(n?n:e)},u,u.exports,e,t,n,r)}return n[a].exports}for(var s="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"number"==typeof e}function s(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!i(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,i,o,l,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],a(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(i=arguments.length,o=Array(i-1),l=1;i>l;l++)o[l-1]=arguments[l];n.apply(this,o)}else if(s(n)){for(i=arguments.length,o=Array(i-1),l=1;i>l;l++)o[l-1]=arguments[l];for(c=n.slice(),i=c.length,l=0;i>l;l++)c[l].apply(this,o)}return!0},n.prototype.addListener=function(e,t){var i;if(!r(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,s(this._events[e])&&!this._events[e].warned){var i;i=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,i,a,o;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],a=n.length,i=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(s(n)){for(o=a;o-->0;)if(n[o]===t||n[o].listener&&n[o].listener===t){i=o;break}if(0>i)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?r(e._events[t])?1:e._events[t].length:0}},{}],2:[function(e,t){t.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],3:[function(e,t,n){(function(e){function t(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,s=function(e){return i.exec(e).slice(1)};n.resolve=function(){for(var n="",i=!1,s=arguments.length-1;s>=-1&&!i;s--){var a=0>s?e.cwd():arguments[s];if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(n=a+"/"+n,i="/"===a.charAt(0))}return n=t(r(n.split("/"),function(e){return!!e}),!i).join("/"),(i?"/":"")+n||"."},n.normalize=function(e){var i=n.isAbsolute(e),s="/"===a(e,-1);return e=t(r(e.split("/"),function(e){return!!e}),!i).join("/"),e||i||(e="."),e&&s&&(e+="/"),(i?"/":"")+e},n.isAbsolute=function(e){return"/"===e.charAt(0)},n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(r(e,function(e){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},n.relative=function(e,t){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=n.resolve(e).substr(1),t=n.resolve(t).substr(1);for(var i=r(e.split("/")),s=r(t.split("/")),a=Math.min(i.length,s.length),o=a,l=0;a>l;l++)if(i[l]!==s[l]){o=l;break}for(var c=[],l=o;l<i.length;l++)c.push("..");return c=c.concat(s.slice(o)),c.join("/")},n.sep="/",n.delimiter=":",n.dirname=function(e){var t=s(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},n.basename=function(e,t){var n=s(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},n.extname=function(e){return s(e)[3]};var a="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return 0>t&&(t=e.length+t),e.substr(t,n)}}).call(this,e("_process"))},{_process:4}],4:[function(e,t){function n(){c=!1,a.length?l=a.concat(l):u=-1,l.length&&r()}function r(){if(!c){var e=setTimeout(n);c=!0;for(var t=l.length;t;){for(a=l,l=[];++u<t;)a[u].run();u=-1,t=l.length}a=null,c=!1,clearTimeout(e)}}function i(e,t){this.fun=e,this.array=t}function s(){}var a,o=t.exports={},l=[],c=!1,u=-1;o.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new i(e,t)),1!==l.length||c||setTimeout(r,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=s,o.addListener=s,o.once=s,o.off=s,o.removeListener=s,o.removeAllListeners=s,o.emit=s,o.binding=function(){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(){throw Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],5:[function(e,t){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],6:[function(e,t,n){(function(t,r){function i(e,t){var r={seen:[],stylize:a};return arguments.length<3||(r.depth=arguments[2]),arguments.length<4||(r.colors=arguments[3]),g(t)?r.showHidden=t:t&&n._extend(r,t),b(r.showHidden)&&(r.showHidden=!1),b(r.depth)&&(r.depth=2),b(r.colors)&&(r.colors=!1),b(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=s),l(r,e,r.depth)}function s(e,t){var n=i.styles[t];return n?"["+i.colors[n][0]+"m"+e+"["+i.colors[n][1]+"m":e}function a(e){return e}function o(e){var t={};return e.forEach(function(e){t[e]=!0}),t}function l(e,t,r){if(e.customInspect&&t&&C(t.inspect)&&t.inspect!==n.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(r,e);return w(i)||(i=l(e,i,r)),i}var s=c(e,t);if(s)return s;var a=Object.keys(t),g=o(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),A(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return u(t);if(0===a.length){if(C(t)){var m=t.name?": "+t.name:"";return e.stylize("[Function"+m+"]","special")}if(k(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(O(t))return e.stylize(Date.prototype.toString.call(t),"date");if(A(t))return u(t)}var v="",y=!1,x=["{","}"];if(p(t)&&(y=!0,x=["[","]"]),C(t)){var b=t.name?": "+t.name:"";v=" [Function"+b+"]"}if(k(t)&&(v=" "+RegExp.prototype.toString.call(t)),O(t)&&(v=" "+Date.prototype.toUTCString.call(t)),A(t)&&(v=" "+u(t)),0===a.length&&(!y||0==t.length))return x[0]+v+x[1];if(0>r)return k(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var I;return I=y?h(e,t,r,g,a):a.map(function(n){return d(e,t,r,g,n,y)}),e.seen.pop(),f(I,v,x)}function c(e,t){if(b(t))return e.stylize("undefined","undefined");if(w(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return y(t)?e.stylize(""+t,"number"):g(t)?e.stylize(""+t,"boolean"):m(t)?e.stylize("null","null"):void 0}function u(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,n,r,i){for(var s=[],a=0,o=t.length;o>a;++a)s.push(L(t,a+"")?d(e,t,n,r,a+"",!0):"");return i.forEach(function(i){i.match(/^\d+$/)||s.push(d(e,t,n,r,i,!0))}),s}function d(e,t,n,r,i,s){var a,o,c;if(c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},c.get?o=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(o=e.stylize("[Setter]","special")),L(r,i)||(a="["+i+"]"),o||(e.seen.indexOf(c.value)<0?(o=m(n)?l(e,c.value,null):l(e,c.value,n-1),o.indexOf("\n")>-1&&(o=s?o.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+o.split("\n").map(function(e){return"   "+e}).join("\n"))):o=e.stylize("[Circular]","special")),b(a)){if(s&&i.match(/^\d+$/))return o;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+o}function f(e,t,n){var r=0,i=e.reduce(function(e,t){return r++,t.indexOf("\n")<0||r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function p(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function m(e){return null===e}function v(e){return null==e}function y(e){return"number"==typeof e}function w(e){return"string"==typeof e}function x(e){return"symbol"==typeof e}function b(e){return void 0===e}function k(e){return I(e)&&"[object RegExp]"===P(e)}function I(e){return"object"==typeof e&&null!==e}function O(e){return I(e)&&"[object Date]"===P(e)}function A(e){return I(e)&&("[object Error]"===P(e)||e instanceof Error)}function C(e){return"function"==typeof e}function S(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function P(e){return Object.prototype.toString.call(e)}function R(e){return 10>e?"0"+e.toString(10):e.toString(10)}function E(){var e=new Date,t=[R(e.getHours()),R(e.getMinutes()),R(e.getSeconds())].join(":");return[e.getDate(),j[e.getMonth()],t].join(" ")}function L(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var W=/%[sdj%]/g;n.format=function(e){if(!w(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(i(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,s=r.length,a=(e+"").replace(W,function(e){if("%%"===e)return"%";if(n>=s)return e;switch(e){case"%s":return r[n++]+"";case"%d":return+r[n++];case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return e}}),o=r[n];s>n;o=r[++n])a+=m(o)||!I(o)?" "+o:" "+i(o);return a},n.deprecate=function(e,i){function s(){if(!a){if(t.throwDeprecation)throw Error(i);t.traceDeprecation?console.trace(i):console.error(i),a=!0}return e.apply(this,arguments)}if(b(r.process))return function(){return n.deprecate(e,i).apply(this,arguments)};if(t.noDeprecation===!0)return e;var a=!1;return s};var _,D={};n.debuglog=function(e){if(b(_)&&(_=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!D[e])if(RegExp("\\b"+e+"\\b","i").test(_)){var r=t.pid;D[e]=function(){var t=n.format.apply(n,arguments);console.error("%s %d: %s",e,r,t)}}else D[e]=function(){};return D[e]},n.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=p,n.isBoolean=g,n.isNull=m,n.isNullOrUndefined=v,n.isNumber=y,n.isString=w,n.isSymbol=x,n.isUndefined=b,n.isRegExp=k,n.isObject=I,n.isDate=O,n.isError=A,n.isFunction=C,n.isPrimitive=S,n.isBuffer=e("./support/isBuffer");var j=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",E(),n.format.apply(n,arguments))},n.inherits=e("inherits"),n._extend=function(e,t){if(!t||!I(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":5,_process:4,inherits:2}],7:[function(e,t){"use strict";t.exports={addColorStop:e("./src/addColorStop"),arc:e("./src/arc"),arcTo:e("./src/arcTo"),beginPath:e("./src/beginPath"),bezierCurveTo:e("./src/bezierCurveTo"),Canvas:e("./src/Canvas"),clearRect:e("./src/clearRect"),clip:e("./src/clip"),clipPath:e("./src/clipPath"),closePath:e("./src/closePath"),createLinearGradient:e("./src/createLinearGradient"),createRadialGradient:e("./src/createRadialGradient"),drawCanvas:e("./src/drawCanvas"),drawImage:e("./src/drawImage"),ellipse:e("./src/ellipse"),fill:e("./src/fill"),fillArc:e("./src/fillArc"),fillCanvas:e("./src/fillCanvas"),fillImage:e("./src/fillImage"),fillImagePattern:e("./src/fillImagePattern"),fillRect:e("./src/fillRect"),fillStyle:e("./src/fillStyle"),globalAlpha:e("./src/globalAlpha"),globalCompositeOperation:e("./src/globalCompositeOperation"),Gradient:e("./src/Gradient"),hitRect:e("./src/hitRect"),hitRegion:e("./src/hitRegion"),Img:e("./src/Img"),Instruction:e("./src/Instruction"),isDataUrl:e("./src/isDataUrl"),isWorker:e("./src/isWorker"),lineStyle:e("./src/lineStyle"),lineTo:e("./src/lineTo"),moveTo:e("./src/moveTo"),path:e("./src/path"),quadraticCurveTo:e("./src/quadraticCurveTo"),rect:e("./src/rect"),Renderer:e("./src/Renderer"),rotate:e("./src/rotate"),scale:e("./src/scale"),shadowStyle:e("./src/shadowStyle"),stroke:e("./src/stroke"),strokeArc:e("./src/strokeArc"),strokeRect:e("./src/strokeRect"),strokeStyle:e("./src/strokeStyle"),text:e("./src/text"),textStyle:e("./src/textStyle"),transform:e("./src/transform"),transformPoints:e("./src/transformPoints"),translate:e("./src/translate")}},{"./src/Canvas":10,"./src/Gradient":11,"./src/Img":12,"./src/Instruction":13,"./src/Renderer":14,"./src/addColorStop":15,"./src/arc":16,"./src/arcTo":17,"./src/beginPath":18,"./src/bezierCurveTo":19,"./src/clearRect":20,"./src/clip":21,"./src/clipPath":22,"./src/closePath":23,"./src/createLinearGradient":24,"./src/createRadialGradient":25,"./src/drawCanvas":26,"./src/drawImage":27,"./src/ellipse":28,"./src/fill":29,"./src/fillArc":30,"./src/fillCanvas":31,"./src/fillImage":32,"./src/fillImagePattern":33,"./src/fillRect":34,"./src/fillStyle":35,"./src/globalAlpha":36,"./src/globalCompositeOperation":37,"./src/hitRect":38,"./src/hitRegion":39,"./src/isDataUrl":41,"./src/isWorker":42,"./src/lineStyle":43,"./src/lineTo":44,"./src/moveTo":45,"./src/path":46,"./src/quadraticCurveTo":47,"./src/rect":48,"./src/rotate":49,"./src/scale":50,"./src/shadowStyle":51,"./src/stroke":52,"./src/strokeArc":53,"./src/strokeRect":54,"./src/strokeStyle":55,"./src/text":56,"./src/textStyle":57,"./src/transform":58,"./src/transformPoints":59,"./src/translate":60}],8:[function(e,t,n){n=t.exports=function(e){if(e&&"object"==typeof e){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if("number"==typeof e)return a[e];var n=e+"",s=r[n.toLowerCase()];if(s)return s;var s=i[n.toLowerCase()];return s?s:1===n.length?n.charCodeAt(0):void 0};var r=n.code=n.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"right click":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},i=n.aliases={windows:91,"â‡§":16,"âŒ¥":18,"âŒƒ":17,"âŒ˜":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,pgup:33,pgdn:33,ins:45,del:46,cmd:91};/*!
 * Programatically add the following
 */
for(s=97;123>s;s++)r[String.fromCharCode(s)]=s-32;for(var s=48;58>s;s++)r[s-48]=s;for(s=1;13>s;s++)r["f"+s]=s+111;for(s=0;10>s;s++)r["numpad "+s]=s+96;var a=n.names=n.title={};for(s in r)a[r[s]]=s;for(var o in i)r[o]=i[o]},{}],9:[function(e,t){t.exports=function(e,t){for(var n=e[0],r=e[1],i=!1,s=0,a=t.length-1;s<t.length;a=s++){var o=t[s][0],l=t[s][1],c=t[a][0],u=t[a][1],h=l>r!=u>r&&(c-o)*(r-l)/(u-l)+o>n;h&&(i=!i)}return i}},{}],10:[function(e,t){"use strict";function n(t,i,a){this.id=a||s(),this.width=t,this.height=i;var o=e("./Renderer");r?(postMessage({type:"canvas",value:{id:this.id,width:this.width,height:this.height,children:[]}}),this.renderer=null):this.renderer=new o(t,i,document.createElement("div")),this.fillPattern=null,n.cache[this.id]=this,Object.seal(this)}var r=e("./isWorker"),i=e("./Img"),s=e("./id");n.prototype.render=function(){var e,t,n,i=[],s=i.concat;for(e=0;e<arguments.length;e++)i.push(arguments[e]);for(e=0,t=i.length;t>e;e++)if(n=i[e],n&&n.constructor===Array){for(i=s.apply([],i),n=i[e];n&&n.constructor===Array;)i=s.apply([],i),n=i[e];t=i.length}r?postMessage({type:"canvas",value:{id:this.id,width:this.width,height:this.height,children:i}}):(this.renderer.render(i),this.fillPattern=this.renderer.ctx.createPattern(this.renderer.canvas,"no-repeat"))},n.prototype.toImage=function(e){var t;return t=new i(e||s()),r?(postMessage({type:"canvas-image",value:{id:this.id,imageID:e}}),t):(t.src=this.renderer.canvas.toDataURL("image/png"),t)},n.prototype.dispose=function(){if(r)return postMessage({type:"canvas-dispose",value:{id:this.id}});n.cache[this.id]=null;var e=n.cachable.indexOf(this.id);e>-1&&n.cachable.splice(e,1)},n.prototype.cache=function(){if(r)return postMessage({type:"canvas-cache",value:{id:this.id}});var e=n.cachable.indexOf(this.id);return-1===e&&n.cachable.push(this.id),this},n.cleanUp=function(){for(var e,t={},r=0;r<n.cachable.length;r++)e=n.cachable[r],t[e]=n.cache[e];n.cache=t},n.prototype.resize=function(e,t){return this.renderer.resize(e,t)},n.cache={},n.cachable=[],n.create=function(e,t,r){return new n(e,t,r)},Object.seal(n),Object.seal(n.prototype),t.exports=n},{"./Img":12,"./Renderer":14,"./id":40,"./isWorker":42}],11:[function(e,t){"use strict";function n(e,t){this.id=e,this.grd=t,n.cache[e]=this,Object.seal(this)}var r=e("./isWorker");n.cache={},n.cachable=[],n.prototype.cache=function(){return r?postMessage({type:"gradient-cache",value:{id:this.id}}):n.cachable.push(this.id),this},n.prototype.dispose=function(){if(r)return postMessage({type:"gradient-dispose",value:{id:this.id}});n.cache[this.id]=null;var e=n.cachable.indexOf(this.id);-1!==e&&n.cachable.splice(e,1)},n.cleanUp=function(){for(var e,t={},r=0;r<n.cachable.length;r++)e=n.cachable[r],t[e]=n.cache[e];n.cache=t},Object.seal(n),Object.seal(n.prototype),t.exports=n},{"./isWorker":42}],12:[function(e,t){"use strict";function n(e){s.EventEmitter.call(this),this._src="",this.isDataUrl=!1,this.id=e||o(),this.buffer=new ArrayBuffer,this.onload=function(){},this.texture=null,this.type="image",this.blobOptions={},this.imageElement=null,this.imagePattern=null,this.imagePatternRepeat=null,r&&postMessage({type:"image",value:{id:this.id,src:""}}),Object.seal(this)}var r=(e("path"),e("./isWorker")),i=e("./isDataUrl"),s=e("events"),a=e("util"),o=e("./id");a.inherits(n,s.EventEmitter),n.cache={},n.cachable=[],Object.defineProperty(n.prototype,"src",{set:function(e){if(this.isDataUrl=i(e),r)return n.cache[this.id]=this,void postMessage({type:"image-source",value:{id:this.id,src:e}});var t=new Image;this.imageElement=t,t.src=e,t.onload=this.imageLoad.bind(this)},get:function(){return this._src}}),n.prototype.imageLoad=function(){if(!r){var e=document.createElement("canvas").getContext("2d");this.imagePattern=e.createPattern(this.imageElement,"no-repeat"),this.imagePatternRepeat=e.createPattern(this.imageElement,"repeat")}return n.cache[this.id]=this,this.emit("load",this)},n.prototype.cache=function(){return r?postMessage({type:"image-cache",value:{id:this.id}}):n.cachable.push(this.id),this},n.prototype.dispose=function(){if(r)return postMessage({type:"image-dispose",value:{id:this.id}});n.cache[this.id]=null;var e=n.cachable.indexOf(this.id);-1!==e&&n.cachable.splice(e,1)},n.cleanUp=function(){for(var e,t={},r=0;r<n.cachable.length;r++)e=n.cachable[r],t[e]=n.cache[e];n.cache=t},Object.seal(n),Object.seal(n.prototype),t.exports=n},{"./id":40,"./isDataUrl":41,"./isWorker":42,events:1,path:3,util:6}],13:[function(e,t){"use strict";function n(e,t){this.type=e,this.props=t,Object.seal(this)}Object.seal(n),Object.seal(n.prototype),t.exports=n},{}],14:[function(e,t){"use strict";function n(t,n,a,o){return l.EventEmitter.call(this),r||(r=e("./Canvas")),i||(i=e("./Gradient")),u||(i=e("./Gradient")),this.tree=null,this.isReady=!1,this.mouseState="up",this.mouseData={x:0,y:0,state:this.mouseState,activeRegions:[]},this.lastMouseEvent=null,this.ranMouseEvent=!1,this.mouseRegions=[],this.activeRegions=[],this.styleQueue=[],this.keyData={},s?(this.worker=null,this.canvas=null,this.ctx=null,this.parent=null,addEventListener("message",this.browserCommand.bind(this)),void Object.seal(this)):(o?(this.worker=o instanceof Worker?o:new Worker(o),this.worker.onmessage=this.workerCommand.bind(this)):this.worker=null,a&&1===a.nodeType?this.parent=a:(this.parent=document.createElement("div"),this.parent.style.margin="0 auto",this.parent.style.width=t+"px",this.parent.style.height=n+"px",document.body.appendChild(this.parent)),t&&t>0||(t=window.innerWidth),n&&n>0||(n=window.innerHeight),this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.canvas.width=t,this.canvas.height=n,this.parent.appendChild(this.canvas),this.hookMouseEvents(),this.hookKeyboardEvents(),void Object.seal(this))}var r=null,i=null,s=e("./isWorker"),a=e("./createLinearGradient"),o=e("./createRadialGradient"),l=e("events"),c=e("util"),u=e("./Img"),h=e("keycode"),d=e("./transformPoints"),f=e("point-in-polygon"),p=2*Math.PI,g=new Float64Array([1,0,0,1,0,0]);c.inherits(n,l.EventEmitter),n.prototype.render=function(){var e,t,n,a,o,l,c,h,f,m=[],v=[],y=[],w=[],x=[],b=[],k=[g],I=[],O=this.ctx,A=[],C=A.concat;for(e=0,t=arguments.length;t>e;e++)A.push(arguments[e]);if(s)return this.sendBrowser("render",A);for(e=0,t=A.length;t>e;e++){if(n=A[e],n&&n.constructor===Array){for(A=C.apply([],A),n=A[e];n&&n.constructor===Array;)A=C.apply([],A),n=A[e];t=A.length}if(n)if(a=n.props,o=n.type,"transform"!==o)if("scale"!==o)if("translate"!==o)if("rotate"!==o)if("restore"!==o)if("fillRect"!==o)if("strokeRect"!==o)if("clearRect"!==o)if("rect"===o&&O.rect(a.x,a.y,a.width,a.height),"fillStyle"!==o)if("fillGradient"!=o)if("strokeStyle"!==o)if("strokeGradient"!=o)if("endFillStyle"!==o)if("endStrokeStyle"!==o)if("lineStyle"!==o)if("endLineStyle"!==o)if("textStyle"!==o)if("endTextStyle"!==o)if("shadowStyle"!==o)if("endShadowStyle"!==o)if("text"!==o)if("drawImage"!==o)if("drawImageSize"!==o)if("drawImageSource"!==o){if("fillImagePattern"===o){if(!u.cache.hasOwnProperty(a.img))continue;O.fillStyle=u.cache[a.img].imagePatternRepeat,O.translate(a.dx,a.dy),O.fillRect(0,0,a.dWidth,a.dHeight),O.restore()}if("fillImage"!==o)if("fillImageSize"!==o)if("fillImageSource"!==o)if("fillCanvas"!==o)if("fillCanvasSize"!==o)if("fillCanvasSource"!==o)if("drawCanvas"!==o)if("drawCanvasSize"!==o)if("drawCanvasSource"!==o)"strokeArc"!==o?"strokeArc-counterclockwise"!==o?"fillArc"!==o&&"fillArc-counterclockwise"!==o?"moveTo"!==o?"lineTo"!==o?"bezierCurveTo"!==o?"quadraticCurveTo"!==o?"anticlockwise-arc"!==o?"arc"!==o?"full-arc"!==o?"quick-arc"!==o?"arcTo"!==o?"anticlockwise-ellipse"!==o?"ellipse"!==o?"full-ellipse"!==o?"quick-ellipse"!==o?"globalCompositeOperation"!==o?"endGlobalCompositeOperation"!==o?"fill"!==o?"stroke"!==o?"clipPath"!==o?"beginPath"!==o?"closePath"!==o?"globalAlpha"!==o?"endGlobalAlpha"!==o?"hitRegion"!==o||this.mouseRegions.push({id:a.id,points:d(a.points,k[k.length-1])}):O.globalAlpha=b.pop():(b.push(O.globalAlpha),O.globalAlpha*=a.value):O.closePath():O.beginPath():O.clip():O.stroke():O.fill():O.globalCompositeOperation=I.pop():(I.push(O.globalCompositeOperation),O.globalCompositeOperation=a.value):(this.save(),this.translate(a.x,a.y),this.scale(a.radiusX,a.radiusY),this.arc(0,0,1,0,p),this.restore()):(this.save(),this.translate(a.x,a.y),this.rotate(a.rotation),this.scale(a.radiusX,a.radiusY),this.arc(0,0,1,0,p),this.restore()):(this.save(),this.translate(a.x,a.y),this.rotate(a.rotation),this.scale(a.radiusX,a.radiusY),this.arc(0,0,1,a.startAngle,a.endAngle),this.restore()):(this.save(),this.translate(a.x,a.y),this.rotate(a.rotation),this.scale(a.radiusX,a.radiusY),this.arc(0,0,1,a.startAngle,a.endAngle,!0),this.restore()):O.arcTo(a.x1,a.y1,a.x2,a.y2,a.r):O.arc(0,0,a.r,0,p):O.arc(a.x,a.y,a.r,0,p):O.arc(a.x,a.y,a.r,a.startAngle,a.endAngle):O.arc(a.x,a.y,a.r,a.startAngle,a.endAngle,!0):O.quadraticCurveTo(a.cpx,a.cpy,a.x,a.y):O.bezierCurveTo(a.cp1x,a.cp1y,a.cp2x,a.cp2y,a.x,a.y):O.lineTo(a.x,a.y):O.moveTo(a.x,a.y):(O.beginPath(),O.arc(a.x,a.y,a.r,a.startAngle,a.endAngle),O.closePath(),O.fill()):(O.beginPath(),O.arc(a.x,a.y,a.r,a.startAngle,a.endAngle,!0),O.closePath(),O.stroke()):(O.beginPath(),O.arc(a.x,a.y,a.r,a.startAngle,a.endAngle),O.closePath(),O.stroke());else{if(!r.cache.hasOwnProperty(a.img))continue;O.drawImage(r.cache[a.img].renderer.canvas,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}else{if(!r.cache.hasOwnProperty(a.img))continue;O.drawImage(r.cache[a.img].renderer.canvas,a.dx,a.dy,a.dWidth,a.dHeight)}else{if(!r.cache.hasOwnProperty(a.img))continue;O.drawImage(r.cache[a.img].renderer.canvas,a.dx,a.dy)}else{if(!r.cache.hasOwnProperty(a.img))continue;l=r.cache[a.img],O.save(),O.fillStyle=l.fillPattern,O.translate(a.dx,a.dy),O.scale(l.width/a.sWidth,l.height/a.sHeight),O.translate(-a.sx,-a.sy),O.fillRect(a.sx,a.sy,a.sWidth,a.sHeight),O.restore()}else{if(!r.cache.hasOwnProperty(a.img))continue;l=r.cache[a.img],O.save(),O.fillStyle=l.fillPattern,O.translate(a.dx,a.dy),O.scale(a.dWidth/l.width,a.dHeight/l.height),O.fillRect(0,0,l.width,l.height),O.restore()}else{if(!r.cache.hasOwnProperty(a.img))continue;l=r.cache[a.img],O.save(),O.fillStyle=l.fillPattern,O.translate(a.dx,a.dy),O.fillRect(0,0,l.width,l.height),O.restore()}else{if(!u.cache.hasOwnProperty(a.img))continue;l=u.cache[a.img].imageElement,O.save(),O.fillStyle=u.cache[a.img].imagePattern,O.translate(a.dx,a.dy),O.scale(l.dWidth/a.sWidth,l.dHeight/a.sHeight),O.translate(-a.sx,-a.sy),O.fillRect(a.sx,a.sy,a.sWidth,a.sHeight),O.restore()}else{if(!u.cache.hasOwnProperty(a.img))continue;l=u.cache[a.img].imageElement,O.save(),O.fillStyle=u.cache[a.img].imagePattern,O.translate(a.dx,a.dy),O.scale(a.dWidth/l.width,a.dHeight/l.height),O.fillRect(0,0,l.width,l.height),O.restore()}else{if(!u.cache.hasOwnProperty(a.img))continue;l=u.cache[a.img].imageElement,O.save(),O.fillStyle=u.cache[a.img].imagePattern,O.translate(a.dx,a.dy),O.fillRect(0,0,l.width,l.height),O.restore()}}else{if(!u.cache.hasOwnProperty(a.img))continue;O.drawImage(u.cache[a.img].imageElement||new Image,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}else{if(!u.cache.hasOwnProperty(a.img))continue;O.drawImage(u.cache[a.img].imageElement||new Image,a.dx,a.dy,a.dWidth,a.dHeight)}else{if(!u.cache.hasOwnProperty(a.img))continue;O.drawImage(u.cache[a.img].imageElement||new Image,a.dx,a.dy)}else{if(0!==a.maxWidth){a.fill&&O.fillText(a.text,a.x,a.y,a.maxWidth),a.stroke&&O.strokeText(a.text,a.x,a.y,a.maxWidth);continue}a.fill&&O.fillText(a.text,a.x,a.y),a.stroke&&O.strokeText(a.text,a.x,a.y)}else l=x.pop(),O.shadowBlur=l.shadowBlur,O.shadowColor=l.shadowColor,O.shadowOffsetX=l.shadowOffsetX,O.shadowOffsetY=l.shadowOffsetY;else x.push({shadowBlur:O.shadowBlur,shadowColor:O.shadowColor,shadowOffsetX:O.shadowOffsetX,shadowOffsetY:O.shadowOffsetY}),null!==a.shadowBlur&&(O.shadowBlur=a.shadowBlur),null!==a.shadowColor&&(O.shadowColor=a.shadowColor),null!==a.shadowOffsetX&&(O.shadowOffsetX=a.shadowOffsetX),null!==a.shadowOffsetY&&(O.shadowOffsetY=a.shadowOffsetY);else l=w.pop(),O.font=l.font,O.textAlign=l.textAlign,O.textBaseline=l.textBaseline,O.direction=l.direction;else w.push({font:O.font,textAlign:O.textAlign,textBaseline:O.textBaseline,direction:O.direction}),null!==a.font&&(O.font=a.font),null!==a.textAlign&&(O.textAlign=a.textAlign),null!==a.textBaseline&&(O.textBaseline=a.textBaseline),null!==a.lineJoin&&(O.direction=a.direction);else l=y.pop(),O.lineWidth=l.lineWidth,O.lineCap=l.lineCap,O.lineJoin=l.lineJoin,O.miterLimit=l.miterLimit,O.setLineDash(l.lineDash),O.lineDashOffset=l.lineDashOffset;else y.push({lineWidth:O.lineWidth,lineCap:O.lineCap,lineJoin:O.lineJoin,miterLimit:O.miterLimit,lineDash:O.getLineDash(),lineDashOffset:O.lineDashOffset}),null!==a.lineWidth&&(O.lineWidth=a.lineWidth),null!==a.lineCap&&(O.lineCap=a.lineCap),null!==a.lineJoin&&(O.lineJoin=a.lineJoin),null!==a.miterLimit&&(O.miterLimit=a.miterLimit),a.lineDash.length>0&&O.setLineDash(a.lineDash),null!==a.lineDashOffset&&(O.lineDashOffset=a.lineDashOffset);else O.strokeStyle=v.pop();else O.fillStyle=m.pop();else v.push(O.strokeStyle),i.cache.hasOwnProperty(a.value.id)&&(O.strokeStyle=i.cache[a.value.id].grd);else v.push(O.strokeStyle),O.strokeStyle=a.value;else m.push(O.fillStyle),i.cache.hasOwnProperty(a.value.id)&&(O.fillStyle=i.cache[a.value.id].grd);else m.push(O.fillStyle),O.fillStyle=a.value;else O.clearRect(a.x,a.y,a.width,a.height);else O.strokeRect(a.x,a.y,a.width,a.height);else O.fillRect(a.x,a.y,a.width,a.height);else k.pop(),c=k[k.length-1],O.setTransform(c[0],c[1],c[2],c[3],c[4],c[5]);else f=Math.cos(a.r),h=Math.sin(a.r),c=new Float64Array(k[k.length-1]),c[0]=c[0]*f+c[2]*-h,c[1]=c[1]*f+c[3]*-h,c[2]=c[0]*h+c[2]*f,c[3]=c[1]*h+c[3]*f,k.push(c),O.setTransform(c[0],c[1],c[2],c[3],c[4],c[5]);else c=new Float64Array(k[k.length-1]),c[4]+=c[0]*a.x+c[2]*a.y,c[5]+=c[1]*a.x+c[3]*a.y,k.push(c),O.setTransform(c[0],c[1],c[2],c[3],c[4],c[5]);else c=new Float64Array(k[k.length-1]),c[0]*=a.x,c[1]*=a.x,c[2]*=a.y,c[3]*=a.y,k.push(c),O.setTransform(c[0],c[1],c[2],c[3],c[4],c[5]);else l=k[k.length-1],c=new Float64Array([l[0]*a.a+l[2]*a.b,l[1]*a.a+l[3]*a.b,l[0]*a.c+l[2]*a.d,l[1]*a.c+l[3]*a.d,l[0]*a.e+l[2]*a.f+l[4],l[1]*a.e+l[3]*a.f+l[5]]),k.push(c),O.setTransform(c[0],c[1],c[2],c[3],c[4],c[5])}return this.applyStyles()},n.create=function(e,t,r,i){return arguments.length>2?new n(e,t,r,i):2===arguments.length?new n(e,t):new n},n.prototype.workerCommand=function(t){var n,s=t.data;if(r||(r=e("./Canvas")),i||(i=e("./Gradient")),"ready"===s.type)return this.ready();if("image"===s.type)return n=new u(s.value.id),void(u.cache[s.value.id]=n);if("image-source"===s.type)return void(u.cache.hasOwnProperty(s.value.id)&&(n=u.cache[s.value.id],n.src=s.value.src,n.once("load",function(){this.sendWorker("image-load",s.value)}.bind(this))));if("image-cache"===s.type)return void(u.cache.hasOwnProperty(s.value.id)&&u.cache[s.value.id].cache());if("image-dispose"===s.type)return void(u.cache.hasOwnProperty(s.value.id)&&u.cache[s.value.id].dispose());if("render"===s.type)return void(this.tree=s.value);if("renderer-resize"===s.type)return this.resize(s.value.width,s.value.height);if("canvas"===s.type)return r.cache.hasOwnProperty(s.value.id)||(r.cache[s.value.id]=new r(s.value.width,s.value.height,s.value.id)),n=r.cache[s.value.id],n.resize(s.value.width,s.value.height),r.cache[s.value.id].render(s.value.children);if("canvas-image"===s.type&&r.cache.hasOwnProperty(s.value.id))return void r.cache[s.value.id].toImage(s.value.imageID);if("canvas-cache"===s.type)return void(r.cache.hasOwnProperty(s.value.id)&&r.cache[s.value.id]&&r.cache[s.value.id].cache());if("canvas-dispose"===s.type&&r.cache.hasOwnProperty(s.value.id)&&r.cache[s.value.id])return r.cache[s.value.id].dispose();if("linear-gradient"===s.type)return void(i.cache[s.value.id]=a(s.value.x0,s.value.y0,s.value.x1,s.value.y1,s.value.children,s.value.id));if("radial-gradient"===s.type)return void(i.cache[s.value.id]=o(s.value.x0,s.value.y0,s.value.r0,s.value.x1,s.value.y1,s.value.r1,s.value.children,s.value.id));if("gradient-dispose"!==s.type){if("gradient-cache"!==s.type)return"style"===s.type?this.style(s.value):this.emit(s.type,s.value);if(i.cache.hasOwnProperty(s.value.id))return i.cachable.push(s.value.id)}else if(i.cache.hasOwnProperty(s.value.id))return i.cache[s.value.id].dispose()},n.prototype.resize=function(e,t){return s?this.sendBrowser("renderer-resize",{width:e,height:t}):(""+this.canvas.width!=""+e&&(this.canvas.width=e),void(""+this.canvas.height!=""+t&&(this.canvas.height=t)))},n.prototype.hookRender=function(){return this.isReady&&(this.worker?null!==this.tree&&(this.lastMouseEvent&&!this.ranMouseEvent&&this.mouseMove(this.lastMouseEvent),this.fireFrame(),this.render(this.tree),this.tree=null):(this.lastMouseEvent&&!this.ranMouseEvent&&this.mouseMove(this.lastMouseEvent),this.fireFrame())),requestAnimationFrame(this.hookRender.bind(this))},n.prototype.cleanUpCache=function(){return u.cleanUp(),r.cleanUp(),i.cleanUp()},n.prototype.sendWorker=function(e,t){return this.worker?this.worker.postMessage({type:e,value:t}):this.emit(e,t)},n.prototype.sendBrowser=function(e,t){return postMessage({type:e,value:t})},n.prototype.sendAll=function(e,t){return s?this.sendBrowser(e,t):this.sendWorker(e,t),this.emit(e,t)},n.prototype.hookMouseEvents=function(){return document.addEventListener("mousemove",this.mouseMove.bind(this)),this.canvas.addEventListener("mousedown",this.mouseDown.bind(this)),document.addEventListener("mouseup",this.mouseUp.bind(this))},n.prototype.mouseMove=function(e){var t,n=this.canvas.getBoundingClientRect(),r=[0,0];this.lastMouseEvent=e,this.ranMouseEvent=!0,r[0]=e.clientX-n.left,r[1]=e.clientY-n.top;for(var i=0;i<this.mouseRegions.length;i++)t=this.mouseRegions[i],f(r,t.points)&&(this.activeRegions.push(t.id),this.mouseRegions.splice(this.mouseRegions.indexOf(t),1),i-=1);return this.mouseData.x=r[0],this.mouseData.y=r[1],this.mouseData.state=this.mouseState,this.mouseData.activeRegions=this.activeRegions,this.sendWorker("mouse",this.mouseData),e.preventDefault(),!1},n.prototype.mouseDown=function(e){return this.mouseState="down",this.mouseMove(e)},n.prototype.mouseUp=function(e){return this.mouseState="up",this.mouseMove(e)},n.prototype.hookKeyboardEvents=function(){for(var e in h.code)h.code.hasOwnProperty(e)&&(this.keyData[e]="up");return this.canvas.addEventListener("keydown",this.keyDown.bind(this)),document.addEventListener("keyUp",this.keyUp.bind(this))},n.prototype.keyChange=function(e){return this.sendWorker("key",this.keyData),e.preventDefault(),!1},n.prototype.keyDown=function(e){return this.keyData[h.code[e.keyCode]]="down",this.keyChange(e)},n.prototype.keyUp=function(e){return this.keyData[h.code[e.keyCode]]="up",this.keyChange(e)},n.prototype.browserCommand=function(e){return"image-load"===e.data.type&&u.cache[e.data.value.id].emit("load"),this.emit(e.data.type,e.data.value)},n.prototype.fireFrame=function(){return this.mouseRegions.splice(0,this.mouseRegions.length),this.sendWorker("frame",{}),this.activeRegions.splice(0,this.activeRegions.length),this.ranMouseEvent=!1,setTimeout(this.cleanUpCache.bind(this),0)},n.prototype.style=function(){var e,t,n,r=[],i=[],a=r.concat;for(t=0,e=arguments.length;e>t;t++)r.push(arguments[t]);for(t=0,e=r.length;e>t;t++){if(n&&n.constructor===Array){for(r=a.apply([],r),n=r[t];n&&n.constructor===Array;)r=a.apply([],r),n=r[t];e=r.length}n&&i.push(n)}if(s)this.sendBrowser("style",i);else for(t=0;t<i.length;t++)this.styleQueue.push(i[t])},n.prototype.applyStyles=function(){for(var e,t=0;t<this.styleQueue.length;t++){e=this.styleQueue[t];for(var n in e)e.hasOwnProperty(n)&&(this.canvas.style[n]=e[n])}this.styleQueue.splice(0,this.styleQueue.length)},n.prototype.ready=function(){return s?void this.sendBrowser("ready"):(this.isReady=!0,this.fireFrame(),requestAnimationFrame(this.hookRender.bind(this)))},Object.seal(n),Object.seal(n.prototype),t.exports=n},{"./Canvas":10,"./Gradient":11,"./Img":12,"./createLinearGradient":24,"./createRadialGradient":25,"./isWorker":42,"./transformPoints":59,events:1,keycode:8,"point-in-polygon":9,util:6}],15:[function(e,t){"use strict";function n(e,t){return new r("addColorStop",{offset:e,color:t})}var r=e("./Instruction");t.exports=n},{"./Instruction":13}],16:[function(e,t){"use strict";function n(e,t,n,i,s,a){return arguments.length>5?new r(a?"anticlockwise-arc":"arc",{x:e,y:t,r:n,startAngle:i,endAngle:s}):5===arguments.length?new r("arc",{x:e,y:t,r:n,startAngle:i,endAngle:s}):arguments.length<3?arguments.length<1?new r("quick-arc",{r:1}):new r("quick-arc",{r:e}):new r("full-arc",{x:e,y:t,r:n})}var r=e("./Instruction");t.exports=n},{"./Instruction":13}],17:[function(e,t){"use strict";function n(e,t,n,i,s){return new r("arcTo",{x1:e,y1:t,x2:n,y2:i,r:s})}var r=e("./Instruction");t.exports=n},{"./Instruction":13}],18:[function(e,t){"use strict";function n(){return new r("beginPath")}var r=e("./Instruction");t.exports=n},{"./Instruction":13}],19:[function(e,t){"use strict";function n(e,t,n,i,s,a){return new r("bezierCurveTo",{cp1x:e,cp1y:t,cp2x:n,cp2y:i,x:s,y:a})}var r=e("./Instruction");t.exports=n},{"./Instruction":13}],20:[function(e,t){"use strict";function n(e,t,n,i){return arguments.length>2?new r("clearRect",{x:e,y:t,width:n,height:i}):new r("clearRect",{x:0,y:0,width:e,height:t})}var r=e("./Instruction");t.exports=n},{"./Instruction":13}],21:[function(e,t){"use strict";function n(){for(var e=[r()],t=0;t<arguments.length;t++)e.push(arguments[t]);return e.push(i()),e}var r=e("./beginPath"),i=e("./clipPath");t.exports=n},{"./beginPath":18,"./clipPath":22}],22:[function(e,t){"use strict";function n(){return new r("clipPath")}var r=e("./Instruction");t.exports=n},{"./Instruction":13}],23:[function(e,t){"use strict";function n(){return new r("closePath")}var r=e("./Instruction");t.exports=n},{"./Instruction":13}],24:[function(e,t){"use strict";function n(e,t,n,a,o,l){if(l=l||s(),r)return postMessage({type:"linear-gradient",value:{id:l,x0:e,y0:t,x1:n,y1:a,children:o}}),new i(l,null);for(var c,u=document.createElement("canvas").getContext("2d"),h=u.createLinearGradient(e,t,n,a),d=new i(l,h),f=0;f<o.length;f++)c=o[f],h.addColorStop(c.props.offset,c.props.color);return d}var r=e("./isWorker"),i=e("./Gradient"),s=e("./id");t.exports=n},{"./Gradient":11,"./id":40,"./isWorker":42}],25:[function(e,t){"use strict";function n(e,t,n,a,o,l,c,u){if(u=u||s(),r)return postMessage({type:"radial-gradient",value:{id:u,x0:e,r0:n,y0:t,x1:a,y1:o,r1:l,children:c}}),new i(u,null);for(var h,d=document.createElement("canvas").getContext("2d"),f=d.createRadialGradient(e,t,n,a,o,l),p=new i(u,f),g=0;g<c.length;g++)h=c[g],f.addColorStop(h.props.offset,h.props.color);return p}var r=e("./isWorker"),i=e("./Gradient"),s=e("./id");t.exports=n},{"./Gradient":11,"./id":40,"./isWorker":42}],26:[function(e,t){"use strict";function n(e,t,n,i,s,a,o,l,c){return 9===arguments.length?new r("drawCanvasSource",{img:e.id,sx:t,sy:n,sWidth:i,sHeight:s,dx:a,dy:o,dWidth:l,dHeight:c}):arguments.length<5?arguments.length<3?new r("drawCanvas",{img:e.id,dx:0,dy:0}):new r("drawCanvas",{img:e.id,dx:t,dy:n}):new r("drawCanvasSize",{img:e.id,dx:t,dy:n,dWidth:i,dHeight:s})}var r=e("./Instruction");t.exports=n},{"./Instruction":13}],27:[function(e,t){"use strict";function n(e,t,n,i,s,a,o,l,c){return 9===arguments.length?new r("drawImageSource",{img:e.id,sx:t,sy:n,sWidth:i,sHeight:s,dx:a,dy:o,dWidth:l,dHeight:c}):arguments.length<5?arguments.length<3?new r("drawImage",{img:e.id,dx:0,dy:0}):new r("drawImage",{img:e.id,dx:t,dy:n}):new r("drawImageSize",{img:e.id,dx:t,dy:n,dWidth:i,dHeight:s})}var r=e("./Instruction");t.exports=n},{"./Instruction":13}],28:[function(e,t){"use strict";function n(e,t,n,i,s,a,o,l){return arguments.length>7?new r(l?"anticlockwise-ellipse":"ellipse",{x:e,y:t,radiusX:n,radiusY:i,startAngle:a,endAngle:o}):7===arguments.length?new r("ellipse",{x:e,y:t,radiusX:n,radiusY:i,rotation:s,startAngle:a,endAngle:o}):arguments.length<5?4===arguments.length?new r("quick-ellipse",{x:e,y:t,radiusX:n,radiusY:i}):new r("quick-ellipse",{x:0,y:0,radiusX:e,radiusY:t}):new r("full-ellipse",{x:e,y:t,radiusX:n,radiusY:i,rotation:s})}var r=e("./Instruction");t.exports=n},{"./Instruction":13}],29:[function(e,t){"use strict";function n(){return new r("fill")}var r=e("./Instruction");t.exports=n},{"./Instruction":13}],30:[function(e,t){"use strict";function n(e,t,n,s,a,o){return arguments.length>=6&&o?new r("fillArc-counterclockwise",{x:e,y:t,r:n,startAngle:s,endAngle:a}):arguments.length>3?new r("fillArc",{x:e,y:t,r:n,startAngle:s,endAngle:a}):arguments.length>1?new r("fillArc",{x:e,y:t,r:n,startAngle:0,endAngle:i}):new r("fillArc",{x:0,y:0,r:e,startAngle:0,endAngle:i})}var r=e("./Instruction"),i=2*Math.PI;t.exports=n},{"./Instruction":13}],31:[function(e,t){"use strict";function n(e,t,n,i,s,a,o,l,c){return 9===arguments.length?new r("fillCanvasSource",{img:e.id,sx:t,sy:n,sWidth:i,sHeight:s,dx:a,dy:o,dWidth:l,dHeight:c}):arguments.length<5?arguments.length<3?new r("fillCanvas",{img:e.id,dx:0,dy:0}):new r("fillCanvas",{img:e.id,dx:t,dy:n}):new r("fillCanvasSize",{img:e.id,dx:t,dy:n,dWidth:i,dHeight:s})}var r=e("./Instruction");t.exports=n},{"./Instruction":13}],32:[function(e,t){"use strict";function n(e,t,n,i,s,a,o,l,c){return 9===arguments.length?new r("fillImageSource",{img:e.id,sx:t,sy:n,sWidth:i,sHeight:s,dx:a,dy:o,dWidth:l,dHeight:c}):arguments.length<5?arguments.length<3?new r("fillImage",{img:e.id,dx:0,dy:0}):new r("fillImage",{img:e.id,dx:t,dy:n}):new r("fillImageSize",{img:e.id,dx:t,dy:n,dWidth:i,dHeight:s})}var r=e("./Instruction");t.exports=n},{"./Instruction":13}],33:[function(e,t){"use strict";function n(e,t,n,i,s){return arguments.length<5?arguments.length<3?new r("fillImagePattern",{img:e.id,dx:0,dy:0,dWidth:0,dHeight:0}):new r("fillImagePattern",{img:e.id,dx:0,dy:0,dWidth:t,dHeight:n}):new r("fillImagePattern",{img:e.id,dx:t,dy:n,dWidth:i,dHeight:s})}var r=e("./Instruction");t.exports=n},{"./Instruction":13}],34:[function(e,t){"use strict";function n(e,t,n,i){return arguments.length<4?new r("fillRect",{x:0,y:0,width:e,height:t}):new r("fillRect",{x:e,y:t,width:n,height:i})}var r=e("./Instruction");t.exports=n},{"./Instruction":13}],35:[function(e,t){"use strict";function n(e){var t;e instanceof i&&(t=new r("fillGradient",{value:{id:e.id}})),t||(t=new r("fillStyle",{value:e}));for(var n=[t],s=1;s<arguments.length;s++)n.push(arguments[s]);return n.push(new r("endFillStyle")),n}var r=e("./Instruction"),i=e("./Gradient");t.exports=n},{"./Gradient":11,"./Instruction":13}],36:[function(e,t){"use strict";function n(e){for(var t=[new r("globalAlpha",{value:e})],n=1;n<arguments.length;n++)t.push(arguments[n]);return t.push(new r("endGlobalAlpha")),t}var r=e("./Instruction");t.exports=n},{"./Instruction":13}],37:[function(e,t){"use strict";function n(e){var t=[new r("globalCompositeOperation",{value:e})];if(0===arguments.length)return[];for(var n=1;n<arguments.length;n++)t.push(arguments[n]);return t.push(new r("endGlobalCompositeOperation")),t}var r=e("./Instruction");t.exports=n},{"./Instruction":13}],38:[function(e,t){"use strict";function n(e,t,n,i,s){arguments.length>3||(i=t,s=n,t=0,n=0);var a=[[t,n],[t,n+s],[t+i,n+s],[t+i,n]];return r(e,a)}var r=(e("./Instruction"),e("./hitRegion"));t.exports=n},{"./Instruction":13,"./hitRegion":39}],39:[function(e,t){"use strict";function n(e,t){return new r("hitRegion",{id:e,points:t})}var r=e("./Instruction");t.exports=n},{"./Instruction":13}],40:[function(e,t){"use strict";function n(){return Date.now()+"-"+Math.random()}t.exports=n},{}],41:[function(e,t){function n(e){return!!e.match(n.regex)}n.regex=/^\s*data:([a-z]+\/[a-z]+(;[a-z\-]+\=[a-z\-]+)?)?(;base64)?,[a-z0-9\!\$\&\'\,\(\)\*\+\,\;\=\-\.\_\~\:\@\/\?\%\s]*\s*$/i,Object.seal(n),t.exports=n},{}],42:[function(e,t){"use strict";t.exports="undefined"==typeof document},{}],43:[function(e,t){"use strict";function n(e){e=e||{};var t={lineWidth:null,lineCap:null,lineJoin:null,miterLimit:null,lineDash:[],lineDashOffset:null};void 0!==e.lineWidth&&(t.lineWidth=e.lineWidth),void 0!==e.lineCap&&(t.lineCap=e.lineCap),void 0!==e.lineJoin&&(t.lineJoin=e.lineJoin),void 0!==e.miterLimit&&(t.miterLimit=e.miterLimit),void 0!==e.lineDash&&(t.lineDash=e.lineDash),void 0!==e.lineDashOffset&&(t.lineDashOffset=e.lineDashOffset);for(var n=[new r("lineStyle",t)],i=1;i<arguments.length;i++)n.push(arguments[i]);return n.push(new r("endLineStyle")),n}var r=e("./Instruction");t.exports=n},{"./Instruction":13}],44:[function(e,t){"use strict";function n(e,t){return 0===arguments.length?new r("lineTo",{x:0,y:0}):new r("lineTo",{x:e,y:t})}var r=e("./Instruction");t.exports=n},{"./Instruction":13}],45:[function(e,t){"use strict";function n(e,t){return 0===arguments.length?new r("moveTo",{x:0,y:0}):new r("moveTo",{x:e,y:t})}var r=e("./Instruction");t.exports=n},{"./Instruction":13}],46:[function(e,t){"use strict";function n(){for(var e=[r()],t=0;t<arguments.length;t++)e.push(arguments[t]);return e.push(i()),e}var r=e("./beginPath"),i=e("./closePath");t.exports=n},{"./beginPath":18,"./closePath":23}],47:[function(e,t){"use strict";function n(e,t,n,i){return new r("quadraticCurveTo",{cpx:e,cpy:t,x:n,y:i})}var r=e("./Instruction");t.exports=n},{"./Instruction":13}],48:[function(e,t){"use strict";function n(e,t,n,i){return arguments.length>2?new r("rect",{x:e,y:t,width:n,height:i}):new r("rect",{x:0,y:0,width:e,height:t})}var r=e("./Instruction");t.exports=n},{"./Instruction":13}],49:[function(e,t){"use strict";function n(e){e=+e;for(var t=[new r("rotate",{r:e})],n=1;n<arguments.length;n++)t.push(arguments[n]);return t.push(new r("restore")),t}var r=e("./Instruction");t.exports=n},{"./Instruction":13}],50:[function(e,t){"use strict";function n(e,t,n){var i=2;"number"!=typeof t&&(t=e,i=1),n=n||[];for(var s=[new r("scale",{x:e,y:t})];i<arguments.length;i++)s.push(arguments[i]);return s.push(new r("restore")),s}var r=e("./Instruction");t.exports=n},{"./Instruction":13}],51:[function(e,t){"use strict";function n(e){e=e||{};var t={shadowBlur:null,shadowColor:null,shadowOffsetX:null,shadowOffsetY:null};void 0!==e.shadowBlur&&(t.shadowBlur=e.shadowBlur),void 0!==e.shadowColor&&(t.shadowColor=e.shadowColor),void 0!==e.shadowOffsetX&&(t.shadowOffsetX=e.shadowOffsetX),void 0!==e.direction&&(t.shadowOffsetY=e.shadowOffsetY);for(var n=[new r("shadowStyle",e)],i=1;i<arguments.length;i++)n.push(arguments[i]);return n.push(new r("endShadowStyle")),n}var r=e("./Instruction");t.exports=n},{"./Instruction":13}],52:[function(e,t){"use strict";function n(){return new r("stroke")}var r=e("./Instruction");t.exports=n},{"./Instruction":13}],53:[function(e,t){"use strict";function n(e,t,n,s,a,o){return arguments.length>=6&&o?new r("strokeArc-counterclockwise",{x:e,y:t,r:n,startAngle:s,endAngle:a}):arguments.length>3?new r("strokeArc",{x:e,y:t,r:n,startAngle:s,endAngle:a}):arguments.length>1?new r("strokeArc",{x:e,y:t,r:n,startAngle:0,endAngle:i}):new r("strokeArc",{x:0,y:0,r:e,startAngle:0,endAngle:i})}var r=e("./Instruction"),i=2*Math.PI;t.exports=n},{"./Instruction":13}],54:[function(e,t){"use strict";function n(e,t,n,i){return arguments.length>2?new r("strokeRect",{x:e,y:t,width:n,height:i}):new r("strokeRect",{x:0,y:0,width:e,height:t})}var r=e("./Instruction");t.exports=n},{"./Instruction":13}],55:[function(e,t){"use strict";function n(e){var t;e instanceof i&&(t=new r("strokeGradient",{value:{id:e.id}})),t||(t=new r("strokeStyle",{value:e}));for(var n=[t],s=1;s<arguments.length;s++)n.push(arguments[s]);return n.push(new r("endStrokeStyle")),n}var r=e("./Instruction"),i=e("./Gradient");t.exports=n},{"./Gradient":11,"./Instruction":13}],56:[function(e,t){"use strict";function n(e,t,n,i,s,a){return 6===arguments.length?new r("text",{x:t,y:n,fill:i,stroke:s,text:e,maxWidth:a}):5===arguments.length?new r("text",{x:t,y:n,fill:i,stroke:s,text:e,maxWidth:0}):4===arguments.length?new r("text",{x:t,y:n,fill:i,stroke:!1,text:e,maxWidth:0}):3===arguments.length?new r("text",{x:t,y:n,fill:!0,stroke:!1,text:e,maxWidth:0}):new r("text",{x:0,y:0,fill:!0,stroke:!1,text:e,maxWidth:0})
}var r=e("./Instruction");t.exports=n},{"./Instruction":13}],57:[function(e,t){"use strict";function n(e){e=e||{};var t={font:null,textAlign:null,textBaseline:null,direction:null};void 0!==e.font&&(t.font=e.font),void 0!==e.textAlign&&(t.textAlign=e.textAlign),void 0!==e.textBaseline&&(t.textBaseline=e.textBaseline),void 0!==e.direction&&(t.direction=e.direction);for(var n=[new r("textStyle",e)],i=1;i<arguments.length;i++)n.push(arguments[i]);return n.push(new r("endTextStyle")),n}var r=e("./Instruction");t.exports=n},{"./Instruction":13}],58:[function(e,t){"use strict";function n(e){var t,n,i,s,a,o,l,c,u=new Float64Array([1,0,0,1,0,0]),h=e.length;for(n=0;h>n;n++)t=e[n],t.hasOwnProperty("transform")?(u[0]=u[0]*t.transform.a+u[2]*t.transform.b,u[1]=u[1]*t.transform.a+u[3]*t.transform.b,u[2]=u[0]*t.transform.c+u[2]*t.transform.d,u[3]=u[1]*t.transform.c+u[3]*t.transform.d,u[4]=u[0]*t.transform.e+u[2]*t.transform.f+u[4],u[5]=u[1]*t.transform.e+u[3]*t.transform.f+u[5]):(t.hasOwnProperty("translate")&&(a=t.translate.x,o=t.translate.y,u[4]+=u[0]*a+u[2]*o,u[5]+=u[1]*a+u[3]*o),t.hasOwnProperty("scale")&&(a=t.scale.x,o=t.scale.y,u[0]*=a,u[1]*=a,u[2]*=o,u[3]*=o),t.hasOwnProperty("rotate")&&(s=Math.sin(t.rotate),i=Math.cos(t.rotate),u[0]=u[0]*i+u[2]*-s,u[1]=u[1]*i+u[3]*-s,u[2]=u[0]*s+u[2]*i,u[3]=u[1]*s+u[3]*i));for(l={a:u[0],b:u[1],c:u[2],d:u[3],e:u[4],f:u[5]},c=[new r("transform",l)],n=1,h=arguments.length;h>n;n++)c.push(arguments[n]);return c.push(new r("restore")),c}var r=e("./Instruction");t.exports=n},{"./Instruction":13}],59:[function(e,t){"use strict";function n(e,t){for(var n,r=[],i=e.length,s=0;i>s;s++)n=e[s],r.push([t[0]*n[0]+t[2]*n[1]+t[4],t[1]*n[0]+t[3]*n[1]+t[5]]);return r}t.exports=n},{}],60:[function(e,t){"use strict";function n(e,t){for(var n,i=[new r("translate",{x:e,y:t})],s=2;s<arguments.length;s++)n=arguments[s],Array.isArray(n)?i=i.concat(n):i.push(arguments[s]);return i.push(new r("restore")),i}var r=e("./Instruction");t.exports=n},{"./Instruction":13}]},{},[7])(7)});